<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Conta</title>
    <link rel="stylesheet" type="text/css" href="../style/photon.css">
    <link rel="stylesheet" type="text/css" href="../style/criar_login.css">
</head>
<body>
        <header class="toolbar toolbar-header">
                <div class="toolbar-actions">
                      <div class="btn-group">
                        <button class="btn btn-default" onclick="voltar()">
                          <span class="icon icon-left-open-big"></span>
                        </button>
                      </div>
          </header>
    <form class="formulario">
            <div id="positionform">
        <div class="form-group">
            <br>
            <label>Nome</label>
            <br>
            <input id="nome" type="text" class="form-control-alento" placeholder="Nome Completo" required="required">
        </div>
        <div class="form-group">
            <label>Email</label>
            <br>
            <input id="email" type="text" class="form-control-alento" placeholder="E-mail" required="required">
        </div>
        <div class="form-group">
            <label>Login</label>
            <br>
            <input id="login" type="text" class="form-control-alento" placeholder="Login" required="required">
        </div>
            
        <div class="form-group">
            <br>
            <label>Senha</label>
            <br>
                <input id="senha" type="password" class="form-control-alento" placeholder="Senha" required="required">
            <br>
            <br>
                <input id="c_senha" type="password" class="form-control-alento" placeholder="Repita a senha" required="required">
            <br>
            <br>
            <input id="d_senha" type="text" class="form-control-alento" placeholder="Dica de senha" required="required">
        </div>
        </div>
    
            <button id="registrar" class="btn-mini btn-group" type="submit" onclick="criarLogin()">Registrar</button>
    </form>
    <a id="index" href="../index.html" style="display: none">.</a>
    <script>
        function voltar(){
            var voltar = document.getElementById('index');
            voltar.click();
        }
        function criarLogin(){

            var nome = document.getElementById('nome').value;
            var email = document.getElementById('email').value;
            var login = document.getElementById('login').value;
            var senha = document.getElementById('senha').value;
            var c_senha = document.getElementById('c_senha').value;
            var d_senha = document.getElementById('d_senha').value;

            if(senha==c_senha){

                if(document.getElementById('nome').value.length > 1 && 
                   document.getElementById('email').value.length > 1 && 
                   document.getElementById('login').value.length > 1 && 
                   document.getElementById('senha').value.length > 1 && 
                   document.getElementById('c_senha').value.length > 1 && 
                   document.getElementById('d_senha').value.length > 1){

            var sqlite = require('sqlite-sync');

            sqlite.connect('database/database.db');

            sqlite.insert("CADASTRO",{NAME:nome, EMAIL:email, LOGIN:login, SENHA:senha, D_SENHA:d_senha}, function(res){
	            if(res.error){
		            throw res.error;
                console.log(res);
                alert('Erro: Conexão ao database indisponível.');
                }
                else{
                    alert('Cadastro realizado com sucesso !');
                }
            });

            sqlite.close();
        }
        else{
            alert('ERRO: ALGO INESPERADO ACONTECEU.');
        }
            }
        else{
            alert('As senhas não coincidem.');
        }
        }   
    </script>
</body>
</html>