<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Conta</title>
    <link rel="stylesheet" type="text/css" href="../style/criar_login.css">
</head>
<body>
    <form>
        <h2>REGISTRAR MINHA CONTA</h2>
        <div>
            <input id="nome" type="text" placeholder="Nome Completo" size="50" required="required">
            <br>
            <input id="email" type="text" placeholder="E-mail" size="50" required="required">
            <br>
            <input id="login" type="text" placeholder="Login" size="50" size="50" required="required">
            <br>
            <input id="senha" type="password" placeholder="Senha" size="50" required="required">
            <br>
            <input id="c_senha" type="password" placeholder="Repita a senha" size="50" required="required">
            <br>
            <input id="d_senha" type="text" placeholder="Dica de senha" size="50" required="required">
            <br>
            <input class="buttons" type="button" name="voltar" onclick="goBack()" value="Voltar">
            <button class="buttons" type="submit" onclick="criarLogin()">Registrar</button>
        </div>
    </form>
    <script>
        function goBack(){
            history.back();
        }
        function criarLogin(){

            var nome = document.getElementById('nome').value;
            var email = document.getElementById('email').value;
            var login = document.getElementById('login').value;
            var senha = document.getElementById('senha').value;
            var c_senha = document.getElementById('c_senha').value;
            var d_senha = document.getElementById('d_senha').value;

            if(senha==c_senha){

                if(document.getElementById('nome').value.length > 1 && 
                   document.getElementById('email').value.length > 1 && 
                   document.getElementById('login').value.length > 1 && 
                   document.getElementById('senha').value.length > 1 && 
                   document.getElementById('c_senha').value.length > 1 && 
                   document.getElementById('d_senha').value.length > 1){

            var sqlite = require('sqlite-sync');

            sqlite.connect('database/database.db');

            sqlite.insert("CADASTRO",{NAME:nome, EMAIL:email, LOGIN:login, SENHA:senha, D_SENHA:d_senha}, function(res){
	            if(res.error){
		            throw res.error;
                console.log(res);
                alert('Erro: Conexão ao database indisponível.');
                }
                else{
                    alert('Cadastro realizado com sucesso !');
                }
            });

            sqlite.close();
        }
        else{
            alert('ERRO: ALGO INESPERADO ACONTECEU.');
        }
            }
        else{
            alert('As senhas não coincidem.');
        }
        }   
    </script>
</body>
</html>